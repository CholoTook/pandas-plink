language: python
matrix:
  include:
  - os: linux
    sudo: false
    dist: trusty
    python: '2.7'
  - os: linux
    sudo: false
    dist: trusty
    python: '3.4'
  - os: linux
    sudo: false
    dist: trusty
    python: '3.5'
  - os: osx
    language: generic
    env: TRAVIS_PYTHON_VERSION=3.5
before_install:
- wget https://raw.githubusercontent.com/Horta/travis-miniconda/master/install.sh
  -O install.sh
- chmod +x install.sh
- travis_retry bash -x ./install.sh
install:
- export PATH="$HOME/miniconda/bin:$PATH"
- source activate travisci
before_script:
- export PATH="$HOME/miniconda/bin:$PATH"
- source activate travisci
- python setup.py test
script:
- export PATH="$HOME/miniconda/bin:$PATH"
- source activate travisci
- python setup.py sdist
- pip install dist/`ls dist | grep -i -E '\.(gz)$' | head -1`
- pushd /
- python -c "import pandas_plink; pandas_plink.test()"
- popd
branches:
  only:
  - master
notifications:
  email: false
deploy:
  provider: pypi
  user: dhorta
  password:
    secure: ijVPG9rFgLJINflaUhfux0PtrqrpiE2ZMQ7g3vuYIo6y/MtdT2h+ege0ZTWIOQddot0K/mi51FVFR8IZsJzxVupBwMPxtRcj+U99waRJy2mewUC0NvwI5NTZ61YxRO8MH7pUDPKAmYhPxyocje0c58vnh/+Q2bl96LA7Ox9KvWIAmQikt7rd/ZdZRKZ2/FdfW7vPnRTSKhMRSAcAZ1+PiPU6apkr8wl71gEjOGfYeF/QhVmWZWATgxlKVeZPrKQgcYGWkDMIN1XMVzQpYus+ub98aKLCENisIlOz8bYCDKIalZQnAVIn78GefGQPRegA9BFDc7sWuchGtr8NCaXJdKD1lD9yIqjN9SdQ1zSzTL2Df1CpAPWqPQw5ahHxkdW3jKiyRSj7qxqs9crW1UlDKEHTfUikJ3LdWy52fb9MhGwEZm6tKJ161B6Kk+wyhofeXvK35NeGuy/aVdyiYuQ5HnLrmGfdyA5OgGrPNTUYw+yAnKN3NmYmXIBZLes3FvobQllZYRPkaBlE55ZAzZdyYi0q3MJWEOjG1Tx/UM9FZm4dlZfmH8i4Hd4x8SIw3m8r0AEkStG2SXQT3GvYG1zkmTzH4IRIZnUzPDpsss0PstrzcNDAnOyzTuW/z81EYETZ+liSPgn2TrGD7AzZr/Vm3EGHscgC+TQuFVxJUae0fh8=
  on:
    distributions: sdist bdist_wheel
    repo: glimix/pandas-plink
