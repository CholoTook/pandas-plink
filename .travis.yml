language: python
matrix:
  include:
  - os: linux
    sudo: false
    dist: trusty
    python: '2.7'
  - os: linux
    sudo: false
    dist: trusty
    python: '3.4'
  - os: linux
    sudo: false
    dist: trusty
    python: '3.5'
  - os: osx
    language: generic
    env: TRAVIS_PYTHON_VERSION=3.5
before_install:
- wget https://raw.githubusercontent.com/Horta/travis-miniconda/master/install.sh
  -O install.sh
- chmod +x install.sh
- travis_retry bash -x ./install.sh
install:
- export PATH="$HOME/miniconda/bin:$PATH"
- source activate travisci
before_script:
- export PATH="$HOME/miniconda/bin:$PATH"
- source activate travisci
- python setup.py test
script:
- export PATH="$HOME/miniconda/bin:$PATH"
- source activate travisci
- python setup.py sdist
- pip install dist/`ls dist | grep -i -E '\.(gz)$' | head -1`
- pushd /
- python -c "import pandas_plink; pandas_plink.test()"
- popd
branches:
  only:
  - master
notifications:
  email: false
deploy:
  provider: pypi
  user: dhorta
  password:
    secure: bjYxL7fsiCgzfiZ1X4J9ZHHCmi98W2abUHGZwUeq2bKBhRUYdEh6TTseVbhsU99rfliPyEgvOjYtvroalF+0EkayrbYsuNsWK/tlat+3n12m7ryj300Jua5omUB5j7hG/wiOcyiIedC6/yq3g+NP/elkFZLVwfSwGOxAIW6t3WzQuBgebTC7lZ1jEZ6VYPq7s1oRN/EMOD0flGa1VslsqrpLwhk2bc5PXpR5+LYGpys2iMXLGAAeHOEE9dGzDQLpLwnlD4w0hPk7H2ZVeHT/jFI8gIrzQRS1FWGhAt7rzsVrkSdC58WxK24bWFILdppiQUp5kCzfXP8WYDXopeps4zrveR95YCV688C7ZE5gD4cLTxyWgxrCPvhPn4oJ6Ld/OluhKuG4pSWS8IOJICoH8MlXiwjPEYO3VP+CPC0TlnbkB1welcSVQ7rFwfze/2K7ineZSKgQyWhmskv1u8BrUWY6NZ09wtx40sJaI9889aUwJBxHYBJ6n5m6R6Adg3YCwy1y/UdBTlBBRpnmG6ckMJ+Se1Xr85I7cEDbWRm2ln0Wfdu9qhc88GSUMZCEg2nhQTarh1b4C6RZ56OfQ0fvtSlCP1hN4ux12OM/u/RJVlgGpWw5dopFNrh7/CrmguteW4Vo6w6b/5IgmOBAR7d8b7muU8KWRW3q37AqcuKhbSM=
  on:
    distributions: sdist bdist_wheel
    repo: glimix/pandas-plink
